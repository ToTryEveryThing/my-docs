import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as k,c as r,a as n,d as s,b as c,w as a,e as p}from"./app-DrP46SP8.js";const d={},m=n("h1",{id:"elasticsearch",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#elasticsearch","aria-hidden":"true"},"#"),s(" ElasticSearch")],-1),v={href:"https://www.bilibili.com/video/BV1np4y1C7Yf?p=102&vd_source=f8821730ff8a13ec89104c8629e6d42b",target:"_blank",rel:"noopener noreferrer"},b=n("br",null,null,-1),h={href:"https://www.bilibili.com/video/BV1hh411D7sb/?p=20&spm_id_from=pageDriver&vd_source=f8821730ff8a13ec89104c8629e6d42b",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.cnblogs.com/hualess/p/11540477.html",target:"_blank",rel:"noopener noreferrer"},y={href:"https://blog.csdn.net/qq_17229141/article/details/123106584",target:"_blank",rel:"noopener noreferrer"},f={href:"https://elasticsearch.bookhub.tech/getting_started/esindex.html#%E6%89%B9%E9%87%8F%E7%B4%A2%E5%BC%95%E6%96%87%E6%A1%A3",target:"_blank",rel:"noopener noreferrer"},q={href:"https://blog.csdn.net/qq_41879343/article/details/107376190",target:"_blank",rel:"noopener noreferrer"},w={href:"https://apifox.com/apidoc/shared-f3e304ee-a95c-4dd0-b6a7-5a83abb6ff2c",target:"_blank",rel:"noopener noreferrer"},_=p(`<div class="hint-container tip"><p class="hint-container-title">介绍</p><p>Elasticsearch 是一个分布式的、开源的搜索分析引擎，支持各种数据类型，包括文本、数字、地理、结构化、非结构化。</p><p>可以很好地存储和查询文档，用于应用程序搜索、企业搜索和网站搜索。</p></div><p>安装</p><blockquote><p>限制内存大小 <code>ES_JAVA_OPTS=&quot;-Xms64m -Xmx512m&quot;</code></p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull elasticsearch:7.6.2
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms64m -Xmx512m&quot;</span> elasticsearch:7.6.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>对比数据库</p></blockquote><table><thead><tr><th>索引（indices）</th><th>Databases 数据库</th></tr></thead><tbody><tr><td>类型（type）</td><td>Table 数据表</td></tr><tr><td>文档（Document）</td><td>Row 行</td></tr><tr><td>字段（Field）</td><td>Columns 列</td></tr></tbody></table><h2 id="基础操作" tabindex="-1"><a class="header-anchor" href="#基础操作" aria-hidden="true">#</a> 基础操作</h2><h3 id="cat" tabindex="-1"><a class="header-anchor" href="#cat" aria-hidden="true">#</a> _cat</h3><blockquote><p>method: GET</p></blockquote><ul><li>/_cat/nodes 查看所有的节点</li><li>/_cat/health 健康状态</li><li>/_cat/master</li><li>/_cat/indices 查看索引 show databases;</li></ul><h3 id="索引" tabindex="-1"><a class="header-anchor" href="#索引" aria-hidden="true">#</a> 索引</h3><ul><li>创建索引</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PUT  /shopping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>查看索引</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>删除索引</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>DELETE /shopping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="文档" tabindex="-1"><a class="header-anchor" href="#文档" aria-hidden="true">#</a> 文档</h3><ul><li>创建文档(会覆盖原有的数据）</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PUT/POST  /myindex/_doc/1
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Tom&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">## 不加id 则会自动生成id</span>
POST  /myindex/_doc
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Tom&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改文档（在原来的数据上修改）</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>POST /shopping/_update/23
<span class="token punctuation">{</span>
    <span class="token string">&quot;doc&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;school&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;666&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查询</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET  /myindex/_doc/1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>查询索引下所有文档</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping/_search
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>删除</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>DELETE  /myindex/_doc/1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="高级查询" tabindex="-1"><a class="header-anchor" href="#高级查询" aria-hidden="true">#</a> 高级查询</h3><ul><li>匹配</li></ul><blockquote><p><code>match_phrase</code>不拆分、 <code>match</code>拆分后模糊查询、<code>match_all</code>查询所有</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping/_search
<span class="token punctuation">{</span>
    <span class="token string">&quot;query&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;match&quot;</span>:<span class="token punctuation">{</span> <span class="token comment">## 匹配</span>
			<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tom&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>分页+排序</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping/_search
<span class="token punctuation">{</span>
    <span class="token string">&quot;query&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;match_all&quot;</span>:<span class="token punctuation">{</span> <span class="token comment">## 匹配</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;from&quot;</span>:0, <span class="token comment">## 第几条开始</span>
    <span class="token string">&quot;size&quot;</span>:2,  <span class="token comment">## 一页几条数据</span>
    <span class="token string">&quot;_source&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>, <span class="token comment">## 只要的字段</span>
    <span class="token string">&quot;sort&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token comment">##排序</span>
    	<span class="token string">&quot;name.keyword&quot;</span>:<span class="token punctuation">{</span> <span class="token comment">##排序的字段</span>
    		<span class="token string">&quot;order&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;desc&quot;</span> <span class="token comment">## 升降序</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>多条件查询</li></ul><blockquote><p><code>bool</code>把各种其它查询通过<code>must</code>（与）、<code>must_not</code>（非）、<code>should</code>（或）的方式进行组合</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping/_search
<span class="token punctuation">{</span>
    <span class="token string">&quot;query&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;bool&quot;</span>:<span class="token punctuation">{</span>    <span class="token comment">## 多添加查询</span>
            <span class="token string">&quot;should&quot;</span>:<span class="token punctuation">[</span> 
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;match&quot;</span>:<span class="token punctuation">{</span> <span class="token comment">##匹配</span>
                        <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tom&quot;</span>  <span class="token comment">##name字段</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>,
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;match&quot;</span>:<span class="token punctuation">{</span>
                        <span class="token string">&quot;school&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;汤姆&quot;</span> <span class="token comment">## school字段</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>范围查询</li></ul><blockquote><p><code>gt</code>-大于 <code>gte</code>-大于等于 lt<code>-小于 </code>lte\`-小于等于</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping/_search
<span class="token punctuation">{</span>
    <span class="token string">&quot;query&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;range&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;gt&quot;</span><span class="token builtin class-name">:</span>  <span class="token number">12</span>
            <span class="token punctuation">}</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>高亮</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET /shopping/_search
<span class="token punctuation">{</span>
    <span class="token string">&quot;query&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;match&quot;</span>:<span class="token punctuation">{</span>
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tom&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;highlight&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;fields&quot;</span>:<span class="token punctuation">{</span>
            <span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>聚合</li><li>映射</li></ul><blockquote><p><strong>Mapping（映射）</strong>： 是用来定义文档和它所包含的字段是如何被存储和索引的。</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PUT /shopping/_mapping
<span class="token punctuation">{</span>
    <span class="token string">&quot;properties&quot;</span>:<span class="token punctuation">{</span> 
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token comment">## 字段</span>
            <span class="token string">&quot;type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;text&quot;</span>, <span class="token comment">## 可以被分词查询</span>
            <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token boolean">true</span> <span class="token comment">## 可以被索引</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;sex&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;text&quot;</span>,
            <span class="token string">&quot;index&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;tell&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> 
            <span class="token string">&quot;type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;keyword&quot;</span>, <span class="token comment">## 必须是个完整的词</span>
            <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token boolean">false</span> <span class="token comment">## 不能被索引</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springboot" tabindex="-1"><a class="header-anchor" href="#springboot" aria-hidden="true">#</a> springboot</h2><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
    <span class="token key atrule">uris</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">9200</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实体类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Document</span><span class="token punctuation">(</span>indexName <span class="token operator">=</span> <span class="token string">&quot;mytest&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> mytest <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Field</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token comment">//不可被索引 不可被分开的词查询</span>
    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token class-name">FieldType<span class="token punctuation">.</span>Keyword</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Field</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="索引-1" tabindex="-1"><a class="header-anchor" href="#索引-1" aria-hidden="true">#</a> 索引</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">indexops</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 创建索引</span>
        es<span class="token punctuation">.</span><span class="token function">indexOps</span><span class="token punctuation">(</span>mytest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 删除索引</span>
        es<span class="token punctuation">.</span><span class="token function">indexOps</span><span class="token punctuation">(</span>mytest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文档-1" tabindex="-1"><a class="header-anchor" href="#文档-1" aria-hidden="true">#</a> 文档</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mytest mytest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">mytest</span><span class="token punctuation">(</span><span class="token number">102L</span><span class="token punctuation">,</span><span class="token string">&quot;ggg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;gasd&quot;</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 删除文档</span>
        <span class="token class-name">String</span> delete <span class="token operator">=</span> es<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;102&quot;</span><span class="token punctuation">,</span> mytest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加文档</span>
        es<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>mytest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//添加多个</span>
<span class="token comment">//      es.save(List&lt;mytest&gt;)</span>
        <span class="token comment">//查询文档</span>
        es<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>mytest<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="高级查询-1" tabindex="-1"><a class="header-anchor" href="#高级查询-1" aria-hidden="true">#</a> 高级查询</h3>`,55),S=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"matchQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},'"tmo"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),B=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"sss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},">")]),s(" list "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Arrays"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"asList"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"tom"'),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},'"ggg"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"termQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},","),s(" list"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),x=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"fsdf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"//must"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withQuery"),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"boolQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
                        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"must"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"matchQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},'"tom"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
                        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"must"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"matchQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"address"'),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},'"sSH"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"//should"),s(`
`),n("span",{class:"token comment"},"//        QueryBuilders.boolQuery()"),s(`
`),n("span",{class:"token comment"},'//                .should(QueryBuilders.matchQuery("title", searchTerm1))'),s(`
`),n("span",{class:"token comment"},'//                .should(QueryBuilders.matchQuery("content", searchTerm2))'),s(`
`),n("span",{class:"token comment"},"//                .minimumShouldMatch(1) // 设置至少满足一个should条件"),s(`
`),n("span",{class:"token comment"},"//        );"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),T=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"hasdf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"PageRequest"),s(" of "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"PageRequest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"of"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"//分页设置"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withPageable"),n("span",{class:"token punctuation"},"("),s("of"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Q=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"hhfsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withSort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Sort"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"by"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"age"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ascending"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"hhhhhh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// 添加过滤条件"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withFilter"),n("span",{class:"token punctuation"},"("),s(`
            `),n("span",{class:"token class-name"},"FilterBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"boolFilter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
                `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"must"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"FilterBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"termFilter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"category"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"电子产品"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
                `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"must"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"FilterBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"rangeFilter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"price"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"gte"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"lte"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),H=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token annotation punctuation"},"@Test"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s("  "),n("span",{class:"token function"},"gasdg"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" query "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"matchQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},'"tom"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// 添加高亮信息到查询"),s(`
        `),n("span",{class:"token class-name"},"HighlightBuilder"),s(" highlightBuilder "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HighlightBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        highlightBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"field"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 指定需要高亮的字段"),s(`
        highlightBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preTags"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"<em>"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 设置高亮前缀"),s(`
        highlightBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"postTags"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"</em>"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 设置高亮后缀"),s(`
        query`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withHighlightBuilder"),n("span",{class:"token punctuation"},"("),s("highlightBuilder"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" search "),n("span",{class:"token operator"},"="),s(" es"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("query"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" mytest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        search`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token operator"},"::"),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 处理高亮结果"),s(`
        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" blogs "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"ArrayList"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"SearchHit"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),s("mytest"),n("span",{class:"token punctuation"},">")]),s(" searchHit "),n("span",{class:"token operator"},":"),s(" search"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            mytest blog `),n("span",{class:"token operator"},"="),s(" searchHit"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getContent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token comment"},"// 从高亮结果中获取需要高亮的字段内容"),s(`
            `),n("span",{class:"token class-name"},"Map"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"List"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},">")]),s(" highlightFields "),n("span",{class:"token operator"},"="),s(" searchHit"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getHighlightFields"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("highlightFields"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"containsKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},">")]),s(" titleHighlights "),n("span",{class:"token operator"},"="),s(" highlightFields"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token comment"},"// 获取高亮的标题内容"),s(`
                `),n("span",{class:"token class-name"},"String"),s(" highlightedTitle "),n("span",{class:"token operator"},"="),s(" titleHighlights"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 假设只有一个高亮片段"),s(`
                blog`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setName"),n("span",{class:"token punctuation"},"("),s("highlightedTitle"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
            blogs`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("blog"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),j=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("index"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"BoolQueryBuilder")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("index"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"QueryBuilders")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("index"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"FilterBuilders")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("search"),n("span",{class:"token punctuation"},"."),s("fetch"),n("span",{class:"token punctuation"},"."),s("subphase"),n("span",{class:"token punctuation"},"."),s("highlight"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"HighlightBuilder")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("springframework"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("domain"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"PageRequest")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("springframework"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("domain"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"Pageable")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("springframework"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("domain"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"Sort")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("springframework"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("core"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"ElasticsearchRestTemplate")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("springframework"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("core"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"NativeSearchQueryBuilder")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token import"},[n("span",{class:"token namespace"},[s("org"),n("span",{class:"token punctuation"},"."),s("springframework"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("elasticsearch"),n("span",{class:"token punctuation"},"."),s("core"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},".")]),n("span",{class:"token class-name"},"SearchHits")]),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 定义分页信息"),s(`
`),n("span",{class:"token keyword"},"int"),s(" pageNumber "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 第一页，页码从0开始"),s(`
`),n("span",{class:"token keyword"},"int"),s(" pageSize "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},";"),s("  "),n("span",{class:"token comment"},"// 每页显示10条数据"),s(`
`),n("span",{class:"token class-name"},"Pageable"),s(" pageable "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"PageRequest"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"of"),n("span",{class:"token punctuation"},"("),s("pageNumber"),n("span",{class:"token punctuation"},","),s(" pageSize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Sort"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"by"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"price"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ascending"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 创建NativeSearchQueryBuilder对象"),s(`
`),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),s(" queryBuilder "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"NativeSearchQueryBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 添加查询条件，使用should操作"),s(`
`),n("span",{class:"token class-name"},"String"),s(" searchTerm "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"手机"'),n("span",{class:"token punctuation"},";"),s(`
queryBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"boolQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"should"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"matchQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},","),s(" searchTerm"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"should"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"QueryBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"matchQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"category"'),n("span",{class:"token punctuation"},","),s(" searchTerm"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 添加过滤条件"),s(`
queryBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withFilter"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token class-name"},"FilterBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"boolFilter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"must"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"FilterBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"termFilter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"category"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"电子产品"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"must"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"FilterBuilders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"rangeFilter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"price"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"gte"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"lte"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 添加高亮信息到查询"),s(`
`),n("span",{class:"token class-name"},"HighlightBuilder"),s(" highlightBuilder "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HighlightBuilder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
highlightBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"field"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 指定需要高亮的字段"),s(`
highlightBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preTags"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"<em>"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 设置高亮前缀"),s(`
highlightBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"postTags"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"</em>"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 设置高亮后缀"),s(`
queryBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withHighlightBuilder"),n("span",{class:"token punctuation"},"("),s("highlightBuilder"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 添加分页信息到查询"),s(`
queryBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withPageable"),n("span",{class:"token punctuation"},"("),s("pageable"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 添加排序信息到查询"),s(`
queryBuilder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withSort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Sort"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"by"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"price"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ascending"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 执行查询并获取分页结果"),s(`
`),n("span",{class:"token class-name"},"SearchHits"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"Product"),n("span",{class:"token punctuation"},">")]),s(" searchHits "),n("span",{class:"token operator"},"="),s(" elasticsearchRestTemplate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"search"),n("span",{class:"token punctuation"},"("),s("queryBuilder"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Product"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 处理高亮结果和排序结果"),s(`
`),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"Product"),n("span",{class:"token punctuation"},">")]),s(" products "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"ArrayList"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"SearchHit"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"Product"),n("span",{class:"token punctuation"},">")]),s(" searchHit "),n("span",{class:"token operator"},":"),s(" searchHits"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token class-name"},"Product"),s(" product "),n("span",{class:"token operator"},"="),s(" searchHit"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getContent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 从高亮结果中获取需要高亮的字段内容"),s(`
    `),n("span",{class:"token class-name"},"Map"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"List"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},">")]),s(" highlightFields "),n("span",{class:"token operator"},"="),s(" searchHit"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getHighlightFields"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("highlightFields"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"containsKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},">")]),s(" nameHighlights "),n("span",{class:"token operator"},"="),s(" highlightFields"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"name"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// 获取高亮的名称内容"),s(`
        `),n("span",{class:"token class-name"},"String"),s(" highlightedName "),n("span",{class:"token operator"},"="),s(" nameHighlights"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 假设只有一个高亮片段"),s(`
        product`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setName"),n("span",{class:"token punctuation"},"("),s("highlightedName"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    products`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("product"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// 返回分页结果"),s(`
`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PageImpl"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token punctuation"},"("),s("products"),n("span",{class:"token punctuation"},","),s(" pageable"),n("span",{class:"token punctuation"},","),s(" searchHits"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getTotalHits"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),F=p('<div class="hint-container tip"><p class="hint-container-title">大杂烩</p><p>在上述例子中，<br> 我们结合使用查询、过滤、分页、高亮、排序和should操作。<br> 我们使用<code>QueryBuilders.boolQuery</code>来创建一个布尔查询，使用should操作指定至少满足一个条件的情况：name字段包含搜索词&quot;手机&quot;，或category字段包含搜索词&quot;手机&quot;。<br> 然后，我们使用<code>FilterBuilders.boolFilter</code>来创建一个布尔过滤器，使用must操作添加category字段必须等于&quot;电子产品&quot;，price字段必须在1000到5000之间的过滤条件。<br> 接着，我们按照前述分页方式和排序方式添加分页和排序信息到查询。通过<code>elasticsearchRestTemplate.search()</code>执行查询，并获取查询结果的SearchHits对象。接着，我们从SearchHits中获取查询结果列表，并遍历每个结果，从高亮结果中获取需要高亮的字段内容，并设置到对应的实体对象中。<br> 最后，我们使用PageImpl将结果封装成Page&lt;<code>Product</code>&gt;对象，其中包含了分页信息、查询结果列表和总记录数。</p></div>',1);function N(A,P){const o=l("ExternalLinkIcon"),i=l("CodeTabs");return k(),r("div",null,[m,n("p",null,[n("a",v,[s("old-ElasticSearchbilibili"),c(o)]),b,n("a",h,[s("new-ElasticSearchbilibili"),c(o)])]),n("p",null,[n("a",g,[s("安装"),c(o)]),s(),n("a",y,[s("报错"),c(o)]),s(),n("a",f,[s("官方文档"),c(o)]),s(),n("a",q,[s("基本查询，结果过滤，高级查询，过滤，排序"),c(o)])]),n("p",null,[n("a",w,[s("创建索引 - ElasticSearch (apifox.com)"),c(o)])]),_,c(i,{id:"271",data:[{id:"匹配查询"},{id:"查询多个值"},{id:"布尔查询"},{id:"分页"},{id:"排序"},{id:"过滤"},{id:"高亮"},{id:"大杂烩"}],"tab-id":"shell"},{title0:a(({value:t,isActive:e})=>[s("匹配查询")]),title1:a(({value:t,isActive:e})=>[s("查询多个值")]),title2:a(({value:t,isActive:e})=>[s("布尔查询")]),title3:a(({value:t,isActive:e})=>[s("分页")]),title4:a(({value:t,isActive:e})=>[s("排序")]),title5:a(({value:t,isActive:e})=>[s("过滤")]),title6:a(({value:t,isActive:e})=>[s("高亮")]),title7:a(({value:t,isActive:e})=>[s("大杂烩")]),tab0:a(({value:t,isActive:e})=>[S]),tab1:a(({value:t,isActive:e})=>[B]),tab2:a(({value:t,isActive:e})=>[x]),tab3:a(({value:t,isActive:e})=>[T]),tab4:a(({value:t,isActive:e})=>[Q]),tab5:a(({value:t,isActive:e})=>[E]),tab6:a(({value:t,isActive:e})=>[H]),tab7:a(({value:t,isActive:e})=>[j]),_:1}),F])}const I=u(d,[["render",N],["__file","ElasticSearch.html.vue"]]);export{I as default};
