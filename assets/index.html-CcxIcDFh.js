import{_ as i,c as a,a as n,o as t}from"./app-BJNIPHqW.js";const h={};function l(e,s){return t(),a("div",null,s[0]||(s[0]=[n(`<h2 id="个推" tabindex="-1"><a class="header-anchor" href="#个推"><span>个推</span></a></h2><blockquote><p><code>消息推送</code> 为 App 提供「稳定、高效、免费」的消息下发通道</p></blockquote><p><a href="https://docs.getui.com/getui/server/rest_v2/introduction/" target="_blank" rel="noopener noreferrer">开发文档</a><br><a href="https://mvnrepository.com/artifact/com.getui.push/restful-sdk" target="_blank" rel="noopener noreferrer">maven依赖</a><br><a href="https://github.com/GetuiLaboratory/getui-pushapi-java-client-v2" target="_blank" rel="noopener noreferrer">代码示例</a></p><h2 id="magic-api" tabindex="-1"><a class="header-anchor" href="#magic-api"><span>magic-api</span></a></h2><blockquote><p><code>magic-api</code>是一个基于Java的接口快速开发框架，编写接口将通过magic-api提供的UI界面完成，自动映射为HTTP接口。 无需定义Controller、Service、Dao、Mapper、XML、VO等Java对象即可完成常见的HTTP API接口开发。</p></blockquote><p><a href="https://www.ssssssss.org/magic-api/pages/quick/intro/" target="_blank" rel="noopener noreferrer">开发文档</a></p><h2 id="oha" tabindex="-1"><a class="header-anchor" href="#oha"><span>oha</span></a></h2><p><a href="https://github.com/hatoo/oha" target="_blank" rel="noopener noreferrer">Github</a></p><p>win安装</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">winget install hatoo.oha</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th>参数</th><th>简写</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>--requests</code></td><td><code>-n</code></td><td><code>-n 1000</code></td><td>总请求数，跑完就停。</td></tr><tr><td><code>--concurrency</code></td><td><code>-c</code></td><td><code>-c 50</code></td><td>并发数（同时开多少协程）。</td></tr><tr><td><code>--duration</code></td><td><code>-d</code></td><td><code>-d 30s</code></td><td>压测时长，如 <code>10s</code> / <code>2m</code>；与 <code>-n</code> 二选一。</td></tr><tr><td><code>--timeout</code></td><td><code>-t</code></td><td><code>-t 5s</code></td><td>单请求超时时长，默认 10 s。</td></tr><tr><td><code>--method</code></td><td><code>-m</code></td><td><code>-m POST</code></td><td>HTTP 方法，默认 GET。</td></tr><tr><td><code>--header</code></td><td><code>-H</code></td><td><code>-H &quot;token:abc&quot;</code></td><td>自定义头，可重复多次。</td></tr><tr><td><code>--data</code></td><td><code>-D</code></td><td><code>-D &#39;{&quot;id&quot;:1}&#39;</code></td><td>POST/PUT 请求体；JSON 记得加头 <code>-H &quot;Content-Type:application/json&quot;</code>。</td></tr><tr><td><code>--data-file</code></td><td></td><td><code>-D @payload.json</code></td><td>把请求体写在文件里。</td></tr><tr><td><code>--http-version</code></td><td></td><td><code>--http-version 2</code></td><td>强制 HTTP/2。</td></tr><tr><td><code>--disable-keepalive</code></td><td><code>-k</code></td><td></td><td>关闭长连接，默认开启 Keep-Alive。</td></tr><tr><td><code>--insecure</code></td><td></td><td></td><td>跳过 HTTPS 证书校验（自测证书常用）。</td></tr><tr><td><code>--quiet</code></td><td><code>-q</code></td><td></td><td>只打印最终汇总，不显示实时条。</td></tr><tr><td><code>--json</code></td><td><code>-j</code></td><td></td><td>把结果导出成 JSON，方便后续脚本解析。</td></tr></tbody></table><h2 id="数据签名" tabindex="-1"><a class="header-anchor" href="#数据签名"><span>数据签名</span></a></h2><blockquote><p><code>数据签名</code>，用于防止数据被篡改</p><p>把请求参数按规则排序后加时间戳和密钥生成哈希值，作为签名附在请求中，服务端用同样算法校验，防篡改。</p></blockquote><p>前端</p><blockquote><p>// npm install crypto-js<br> 放在body中一起发送</p></blockquote><div class="language-ts line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="ts" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-ts"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> CryptoJS</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &#39;crypto-js&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">// 与后端约定好的密钥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> SECRET</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">env</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">VITE_SIGN_SECRET</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> buildSign</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> timestamp</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">    // 1. 过滤掉 sign、timestamp 本身</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> raw</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">data };</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;">    delete</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> raw.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">sign</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;">    delete</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> raw.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">timestamp</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">    // 2. key 升序排序后拼串</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> qs</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(raw)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sort</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;">k</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> \`</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">k</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">raw</span><span style="--shiki-light:#383A42;--shiki-dark:#9ECBFF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">k</span><span style="--shiki-light:#383A42;--shiki-dark:#9ECBFF;">]</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&#39;&amp;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> \`</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">qs</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&amp;timestamp=</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">timestamp</span><span style="--shiki-light:#CA1243;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&#39;签名串:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, str, </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">SECRET</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> sign</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> CryptoJS.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">HmacSHA256</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(str, </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">SECRET</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> { sign, timestamp };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>后端</p><blockquote><p>hutool工具包</p><p>创建一个过滤器，在过滤器中获取请求体，并计算签名，然后与前端的签名进行比较，如果一致则继续处理请求，否则返回错误。</p><p>.addFilterBefore(signAuthFilter, UsernamePasswordAuthenticationFilter.class) 放在 Spring Security 的认证过滤器之前执行</p></blockquote><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> SignAuthFilter</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> OncePerRequestFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> EXPIRE_MS </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> 60_000L</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> SECRET </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;myc&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">// 与前端一致</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">    //因为 Servlet 规范规定：请求流只能读一次，读完就没了</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> doFilterInternal</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> resp</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">FilterChain</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> chain</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> ServletException</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">equalsIgnoreCase</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">                // 1. 读取 body</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                CachedBodyHttpServletRequest</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> wrapper </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> CachedBodyHttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(req);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> body </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> StreamUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">copyToString</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">wrapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getInputStream</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">StandardCharsets</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">UTF_8</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                JSONObject</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> json </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> JSONUtil</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">parseObj</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(body);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> sign </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> json</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getStr</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;sign&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                long</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> timestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> json</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getLong</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;timestamp&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0L</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Math</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">abs</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> timestamp) </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> EXPIRE_MS) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                    log</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;签名过期:{}-{}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(), timestamp );</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                    resp</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sendError</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">SC_UNAUTHORIZED</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;签名过期&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> serverSign </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> buildSign</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(json, timestamp);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">serverSign</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">equalsIgnoreCase</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(sign)) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                    log</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;签名无效:{}-{}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,serverSign, sign );</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                    resp</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sendError</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">SC_BAD_REQUEST</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;签名无效&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                req </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> wrapper; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">// 继续向下传递可读 body</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                resp</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sendError</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">SC_BAD_REQUEST</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;签名验证异常&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        chain</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(req, resp);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> buildSign</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">JSONObject</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> json</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> ts</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        Map</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&gt; map </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> json</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">entrySet</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(e </span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;timestamp&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getKey</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(e </span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;sign&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getKey</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Collectors</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">toMap</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Map</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Entry</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">getKey, </span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Map</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Entry</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">getValue));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> qs </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> map</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">entrySet</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sorted</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Map</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Entry</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">comparingByKey</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(e </span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getKey</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;=&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">Collectors</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">joining</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;&amp;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> str 郭文贵</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> qs </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;&amp;timestamp=&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> ts;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;签名串比较{}，{}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,str, SECRET);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> SecureUtil</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">hmacSha256</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(SECRET).</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">digestHex</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(str);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="钉钉" tabindex="-1"><a class="header-anchor" href="#钉钉"><span>钉钉</span></a></h2><p><a href="https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b492R2XQs#/?devType=org&amp;api=dingtalk.oapi.sso.gettoken" target="_blank" rel="noopener noreferrer">钉钉开发平台</a></p><p>旧版maven依赖</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;com.aliyun&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;alibaba-dingtalk-service-sdk&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;2.0.0&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="微信" tabindex="-1"><a class="header-anchor" href="#微信"><span>微信</span></a></h2><h3 id="微信支付" tabindex="-1"><a class="header-anchor" href="#微信支付"><span>微信支付</span></a></h3>`,25)]))}const p=i(h,[["render",l]]),d=JSON.parse('{"path":"/blog/worklogs/","title":"开发","lang":"zh-CN","frontmatter":{"title":"开发","icon":"material-icon-theme:bicep","index":true,"dir":{"order":5,"text":"Group 1"},"description":"个推 消息推送 为 App 提供「稳定、高效、免费」的消息下发通道 开发文档 maven依赖 代码示例 magic-api magic-api是一个基于Java的接口快速开发框架，编写接口将通过magic-api提供的UI界面完成，自动映射为HTTP接口。 无需定义Controller、Service、Dao、Mapper、XML、VO等Java对象即...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"开发\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-14T05:57:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"mishu\\",\\"url\\":\\"https://github.com/ToTryEveryThing/my-docs\\"}]}"],["meta",{"property":"og:url","content":"https://docs.beink.cn/blog/worklogs/"}],["meta",{"property":"og:title","content":"开发"}],["meta",{"property":"og:description","content":"个推 消息推送 为 App 提供「稳定、高效、免费」的消息下发通道 开发文档 maven依赖 代码示例 magic-api magic-api是一个基于Java的接口快速开发框架，编写接口将通过magic-api提供的UI界面完成，自动映射为HTTP接口。 无需定义Controller、Service、Dao、Mapper、XML、VO等Java对象即..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-14T05:57:38.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-14T05:57:38.000Z"}]]},"git":{"createdTime":1723541325000,"updatedTime":1757829458000,"contributors":[{"name":"mishu","username":"mishu","email":"riceuncle@outlook.com","commits":15,"url":"https://github.com/mishu"}],"changelog":[{"hash":"504a2dc39f1aefadf098b0abb602e0492a8c3aaa","time":1757829458000,"email":"riceuncle@outlook.com","author":"mishu","message":"oha"},{"hash":"f31f6612b25967bebdd2052d1761f3c6f491e5a4","time":1756390613000,"email":"riceuncle@outlook.com","author":"mishu","message":"Spring事件发布与监听"},{"hash":"62bc7d6855c651087b081166b9a6a3ac76e9c0f5","time":1755089645000,"email":"riceuncle@outlook.com","author":"mishu","message":"钉钉"},{"hash":"fce239e5e88e64c13aaeb1ffeb3ebd0fb5466f6a","time":1753192146000,"email":"riceuncle@outlook.com","author":"mishu","message":"数据签名"},{"hash":"d914bdbadf10c7494d60a812d3a72c57dac8aeac","time":1752934059000,"email":"riceuncle@outlook.com","author":"mishu","message":"更新版本"},{"hash":"5e26ef7c0f6bb35c0c72208b2aa324de35c35ca4","time":1752929931000,"email":"riceuncle@outlook.com","author":"mishu","message":"整合"},{"hash":"6f73239b58fca703dc113ad10ae79d7b8fb6fb92","time":1728439076000,"email":"riceuncle@outlook.com","author":"mishu","message":"icon"},{"hash":"02e192af68d95ca72d9a3bd8db93c0b5c2ab0cf5","time":1727661246000,"email":"riceuncle@outlook.com","author":"mishu","message":"upup"},{"hash":"94f9799d5fc33c065bd302ad8628cc1f334d70c5","time":1727335440000,"email":"riceuncle@outlook.com","author":"mishu","message":"升级主题"},{"hash":"fe88cf5919f7f045543f77d0b3021e6d14a6208c","time":1723793860000,"email":"riceuncle@outlook.com","author":"mishu","message":"seo"},{"hash":"c0c16af9fcda1b2a473c6115ece4587c0176f743","time":1723793860000,"email":"riceuncle@outlook.com","author":"mishu","message":"seo"},{"hash":"7957722d160cc4e4b7f5034f43d9c221e1d6e098","time":1723597786000,"email":"riceuncle@outlook.com","author":"mishu","message":"toc"},{"hash":"1f77075241652427006cfff3285667a72a1e25fb","time":1723597786000,"email":"riceuncle@outlook.com","author":"mishu","message":"toc"},{"hash":"978107fa74206f2012d2fc2f00485f49339d93f9","time":1723541325000,"email":"riceuncle@outlook.com","author":"mishu","message":"toc"},{"hash":"d66dd0fe7762c00f1f4fe6e7d40931a62bb0c416","time":1723541325000,"email":"riceuncle@outlook.com","author":"mishu","message":"toc"}]},"readingTime":{"minutes":2.82,"words":845},"filePathRelative":"blog/worklogs/README.md","excerpt":"<h2>个推</h2>\\n<blockquote>\\n<p><code>消息推送</code> 为 App 提供「稳定、高效、免费」的消息下发通道</p>\\n</blockquote>\\n<p><a href=\\"https://docs.getui.com/getui/server/rest_v2/introduction/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">开发文档</a><br>\\n<a href=\\"https://mvnrepository.com/artifact/com.getui.push/restful-sdk\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">maven依赖</a><br>\\n<a href=\\"https://github.com/GetuiLaboratory/getui-pushapi-java-client-v2\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">代码示例</a></p>","autoDesc":true}');export{p as comp,d as data};
