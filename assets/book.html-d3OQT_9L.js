import{_ as h,c as k,a,d as i,e as n,b as e,w as t,r as p,o as d}from"./app-BJNIPHqW.js";const E={},r={class:"hint-container tip"};function g(y,s){const l=p("font");return d(),k("div",null,[s[3]||(s[3]=a(`<h2 id="静态资源访问" tabindex="-1"><a class="header-anchor" href="#静态资源访问"><span>静态资源访问</span></a></h2><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-yml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">  mvc</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">    static-path-pattern</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">/static/**</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">  web</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">    resources</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      static-locations</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">classpath:/static/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> staticHandles</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> WebMvcConfigurer</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> addResourceHandlers</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">ResourceHandlerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> registry</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        registry</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">addResourceHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/static/**&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">addResourceLocations</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;classpath:/static/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://github.com/user-attachments/assets/0907b832-fac1-4f55-871e-d8467e6c4d01" alt="image"></p><p>访问 url <a href="http://127.0.0.1" target="_blank" rel="noopener noreferrer">http://127.0.0.1</a>:port/static/1.png</p><h2 id="文件上传" tabindex="-1"><a class="header-anchor" href="#文件上传"><span>文件上传</span></a></h2><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;javax.servlet&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;servlet-api&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;2.5&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;provided&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">form</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/upload&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;post&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> enctype</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;multipart/form-data&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">     &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;uploadFile&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;选择文件&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">     &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;submit&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;上传&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">form</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> FileUploadController</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">     SimpleDateFormat</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> sdf </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> SimpleDateFormat</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;yyyy/MM/dd&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/upload&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> upload</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">MultipartFile</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> uploadFile</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//        运行目录下  没有文件夹 就建一个</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> realPath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getSession</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getServletContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getRealPath</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/uploadFile/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(realPath);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> format </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> sdf</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        File</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> folder </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(realPath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> format);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">folder</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">isDirectory</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            folder</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">mkdirs</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//        重命名</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> oldName </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> uploadFile</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getOriginalFilename</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> newName </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> UUID</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">randomUUID</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                oldName</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">oldName</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">lastIndexOf</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//            保存</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            uploadFile</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">transferTo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(folder,newName));</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//            返回路径</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> filePath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getScheme</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;://&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getServerName</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                    req</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getServerPort</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;/uploadFile/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> format </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> newName;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> filePath;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>打包使用</p></div><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/localhost&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> uploadFile</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">MultipartFile</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> file) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> directoryPath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;static/images/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> fileName </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getOriginalFilename</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">            // 获取当前应用程序的根目录</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> rootPath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;user.dir&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">            // 拼接完整的目录路径</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> filePath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> rootPath </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> directoryPath;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">            // 创建目录</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            File</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> directory </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">directory</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">exists</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                directory</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">mkdirs</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">            // 创建文件对象</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            File</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> destFile </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(directory, fileName);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">            // 保存文件</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            file</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">transferTo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(destFile);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;上传成功&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;上传失败&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-yml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">  servlet</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">    multipart</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">#      是否开启上传</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      file-size-threshold</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">#      保存临时位置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      location</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">E:\\\\temp</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">#      最大</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      max-file-size</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">10MB</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">#      总大小</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      max-request-size</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">10MB</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">#      是否延迟解析</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">      resolve-lazily</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="热加载-hot-swap" tabindex="-1"><a class="header-anchor" href="#热加载-hot-swap"><span>热加载（Hot Swap）</span></a></h2><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;spring-boot-devtools&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">optional</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;true&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">optional</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="websocket-和-sockjs" tabindex="-1"><a class="header-anchor" href="#websocket-和-sockjs"><span>WebSocket 和 SockJS</span></a></h2>`,16)),i("div",r,[s[2]||(s[2]=i("p",{class:"hint-container-title"},"应用场景",-1)),i("p",null,[s[1]||(s[1]=n("WebSocket 和 SockJS 两者都应用广泛，具体应该根据实际情况来选择。WebSocket 是 HTML5 的一种新协议，它实现了浏览器与服务器全双工通信，实现了客户端与服务器端的实时通信。而 SockJS 是 WebSocket 的一个 polyfill 实现，即当浏览器不支持 WebSocket 时，SockJS 可以自动降级为支持长轮询等传输方式的 WebSocket 模拟实现，从而使得浏览器与服务器之间的通信始终保持稳定和高效。")),e(l,{color:"#42b983"},{default:t(()=>s[0]||(s[0]=[n("因此，在一些对稳定性和兼容性有较高要求的项目中，可能会优先选择 SockJS；而在一些对效率要求较高，同时对兼容性要求相对较低的项目中，则可能会优先选择 WebSocket。")])),_:1,__:[0]})])]),s[4]||(s[4]=a(`<blockquote><p>WebSocket和SockJS都是在Web应用程序中使用实时通信的协议，它们都有自己的优势和缺点。</p></blockquote><h4 id="websocket的优势" tabindex="-1"><a class="header-anchor" href="#websocket的优势"><span>WebSocket的优势：</span></a></h4><ul><li>简单易用：WebSocket是一个非常简单的协议，只需建立连接，就可以进行双向通信。</li><li>高效性：WebSocket的头部信息非常小，数据格式紧凑，因此数据传输的效率非常高。</li><li>双向通信：WebSocket提供了双向通信的功能，可以同时在客户端和服务器端发送和接收消息。</li></ul><h4 id="websocket的缺点" tabindex="-1"><a class="header-anchor" href="#websocket的缺点"><span>WebSocket的缺点：</span></a></h4><ul><li>支持性：WebSocket是HTML5标准的一部分，因此只有在支持HTML5的浏览器中才能使用。对于老的浏览器，需要使用polyfill或其他技术。</li><li>长连接：WebSocket在连接建立后会一直保持连接，如果服务器端不能正常关闭连接，可能会导致资源浪费和性能问题。</li></ul><h4 id="sockjs的优势" tabindex="-1"><a class="header-anchor" href="#sockjs的优势"><span>SockJS的优势：</span></a></h4><ul><li>跨浏览器：SockJS可以在所有支持JavaScript的浏览器中运行，甚至包括IE6。</li><li>支持性：SockJS可以通过polyfill模拟WebSocket的功能，因此在不支持WebSocket的浏览器中也可以使用。</li><li>可靠性：SockJS在不支持WebSocket的浏览器中使用的是长轮询技术，可以保证数据的可靠性。</li></ul><h4 id="sockjs的缺点" tabindex="-1"><a class="header-anchor" href="#sockjs的缺点"><span>SockJS的缺点：</span></a></h4><ul><li>头部信息较大：因为SockJS在不支持WebSocket的浏览器中使用的是长轮询技术，因此需要发送大量的头部信息，导致数据传输效率较低。</li><li>连接不稳定：由于SockJS在不支持WebSocket的浏览器中使用的是长轮询技术，因此可能会遇到连接不稳定的情况，例如断开连接或网络故障。</li></ul><h2 id="发送邮件" tabindex="-1"><a class="header-anchor" href="#发送邮件"><span>发送邮件</span></a></h2><p><img src="https://cdn.beink.cn/study/UE1u8asx1_ccuu_NWZKiX.png" alt="study"></p><p>application.yml</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">spring:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">#  邮件配置</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">  mail:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    host: smtp.qq.com</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    port: 465</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    username: totryeverything@qq.com</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    password:&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">第一步获得的密钥</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    default-encoding: utf-8</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    properties:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">      mail:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        smtp:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">          socketFactory:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            class: javax.net.ssl.SSLSocketFactory</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">      debug: true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pom.xml</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-mail&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Service</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> MailService</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">    JavaMailSender</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> javaMailSender</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//    抄送（CC），用户给收件人发出邮件的同时把该邮件抄送给另外的人，在这种抄送方式中，“收件人”知道发件人把该邮件抄送给了另外哪些人。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//    发送者 收件人  抄送人 主题 内容</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> sendSimpleMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> to</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                               String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> subject</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        SimpleMailMessage</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> msg </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> SimpleMailMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        msg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(from);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        msg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setTo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(to);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        msg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setSubject</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(subject);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        msg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setText</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(content);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        javaMailSender</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//   发送带附件的邮件</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> sendFailMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> to</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                             String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> subject</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                             File</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> MessagingException</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        MimeMessage</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> msg </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> javaMailSender</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">createMimeMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        MimeMessageHelper</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> helper </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> MimeMessageHelper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(msg,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(from);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setTo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(to);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setText</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(content);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setSubject</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(subject);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">addAttachment</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(),file);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        javaMailSender</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//    附带图片</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> sendMailImg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> to</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">                            String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> subject</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">                            String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;">srcPath</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;">resIds</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> MessagingException</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">srcPath</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">resIds</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;hello world&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        MimeMessage</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> msg </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> javaMailSender</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">createMimeMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        MimeMessageHelper</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> helper </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> MimeMessageHelper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(from);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setTo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(to);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setText</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(content,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//表示正文是HTML格式</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setSubject</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(subject);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">srcPath</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            FileSystemResource</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> res </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> FileSystemResource</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(srcPath[i]));</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            helper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">addInline</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(resIds[i],res);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        javaMailSender</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>Test</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> MailService</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> mailService</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> sendSimpleMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        mailService</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sendSimpleMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;totryeverything@qq.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;19138084894@163.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">                &quot;Test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;这只不过是一个测试而已&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> sendFailMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() throws MessagingException {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        mailService</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sendFailMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;totryeverything@qq.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;19138084894@163.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">                &quot;Test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;这只不过是一个测试而已&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;E:</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">c</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">ToTryEveryThing</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">README.md&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> sendImgMail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() throws MessagingException {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        mailService</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">sendMailImg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;totryeverything@qq.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;19138084894@163.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">                &quot;Test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">                &quot;这只不过是一个测试而已&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;&lt;img  /&gt;&lt;img  /&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                new</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> []{</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;C:</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">Users</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">Administrator</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">Pictures</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">47f4c019880711ebb6edd017c2d2eca2.jpg&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;C:</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">Users</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">Administrator</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">Pictures</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">下载 (2).png&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                new</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">[]{</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;p1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;p2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">} );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="定时任务" tabindex="-1"><a class="header-anchor" href="#定时任务"><span>定时任务</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>在Spring Boot应用程序中使用@Scheduled注解标记的定时任务是在应用程序启动时自动启动的。</p></div><p>配置</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">EnableScheduling</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> ScheduledTasksConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用</p><blockquote><p>延迟5s启动 然后每隔5s运行一次</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Scheduled</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">fixedRate</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> 5000</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">initialDelay</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> 5000</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> schedul</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(i</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">valueOf</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="scheduled-cron-0-0-12-使用cron表达式指定执行时间。" tabindex="-1"><a class="header-anchor" href="#scheduled-cron-0-0-12-使用cron表达式指定执行时间。"><span>@Scheduled(cron = &quot;0 0 12 * * ?&quot;): 使用CRON表达式指定执行时间。</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">// 每天中午12点执行任务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Scheduled</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">cron</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;0 0 12 * * ?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> doTask</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">    // your task code here</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自启动 通过get方法停止任务</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> ScheduleController</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> TaskScheduler</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> taskScheduler</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> ScheduledFuture</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&gt; scheduledFuture</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> start</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        scheduledFuture </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> taskScheduler</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">scheduleWithFixedDelay</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> MyTask</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">5000L</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//5000ms</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/stop&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> stop</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (scheduledFuture </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            scheduledFuture</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">cancel</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;stop&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> MyTask</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;Task executing...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="数据校验" tabindex="-1"><a class="header-anchor" href="#数据校验"><span>数据校验</span></a></h2><p><a href="https://www.cnblogs.com/54chensongxia/p/14016179.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/54chensongxia/p/14016179.html</a></p><p>依赖</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-validation&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 ValidationMessages.properties</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">user.name.size = name</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">user.address.notnull = adress</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">user.age.size =  age</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">user.email.pattern = email</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Size</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">min</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;{user.name.size}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">NotNull</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;{user.address.notnull}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> address</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">DecimalMin</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> ,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;{user.age.size}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">DecimalMax</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;100&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> ,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;{user.age.size}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> age</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Email</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;{user.email.pattern}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> email</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> getName</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> setName</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> getAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> address;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> setAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> address</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">address</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> address;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> Integer</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> getAge</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> age;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> setAge</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> age</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> age;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> getEmail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> email;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> setEmail</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> email</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">email</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> email;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>controller</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> UserController</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;/adduser/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">addUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Validated</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> User</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">BindingResult</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;"> bindingResult</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        ArrayList</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&gt; error </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> ArrayList</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">bindingResult</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">hasErrors</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()){</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            List</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">ObjectError</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&gt; allErrors </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> bindingResult</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getAllErrors</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">ObjectError</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> e </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> allErrors){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                error</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getDefaultMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;e.getDefaultMessage() = &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getDefaultMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> error;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><div class="language-html line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="html" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">    &lt;!-- input 标签用于选择图片 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> accept</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;image/*&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> @change</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;previewImage&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">    &lt;!-- 预览图片的 img 标签 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;previewImg&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#B392F0;"> style</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#9ECBFF;">max-width: 100%; max-height: 100%;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">  methods</span><span style="--shiki-light:#0184BC;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">    previewImage</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">      // 获取选择的文件</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> event.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">files</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">      // 判断是否是图片类型</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> (file.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&#39;image/&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">        // 创建 FileReader 对象</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> reader</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> FileReader</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">        // 读取图片文件</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        reader.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">readAsDataURL</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">        // 在图片文件读取完毕后设置预览图片的 URL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        reader.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#79B8FF;">          this</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">$refs</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">previewImg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">src</span><span style="--shiki-light:#0184BC;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="分布式锁" tabindex="-1"><a class="header-anchor" href="#分布式锁"><span>分布式锁</span></a></h2><h4 id="redis分布式锁和redisson分布式锁都是用于实现分布式系统中的分布式锁-但它们之间有以下区别" tabindex="-1"><a class="header-anchor" href="#redis分布式锁和redisson分布式锁都是用于实现分布式系统中的分布式锁-但它们之间有以下区别"><span>Redis分布式锁和Redisson分布式锁都是用于实现分布式系统中的分布式锁，但它们之间有以下区别：</span></a></h4><ul><li>Redis分布式锁是基于Redis的SETNX命令实现的，而Redisson分布式锁是基于Redis的Redisson分布式框架实现的。</li><li>Redis分布式锁需要手动编写锁逻辑代码，包括锁定、释放锁等。Redisson分布式锁封装了锁逻辑，并提供了API接口，使得锁的使用变得简单。</li><li>Redis分布式锁在进行锁定和解锁操作时，需要自己实现保证操作的原子性。Redisson分布式锁内部封装了Redis的单线程模型，保证了锁的操作原子性。</li><li>Redis分布式锁在锁定后需要手动维护锁的超时时间。Redisson分布式锁内部封装了锁的自动续期机制，避免了锁过期的问题。</li><li>Redis分布式锁在高并发场景下可能存在死锁的问题。Redisson分布式锁使用Redlock算法避免了死锁的问题。</li></ul><h3 id="redis分布式锁" tabindex="-1"><a class="header-anchor" href="#redis分布式锁"><span>redis分布式锁</span></a></h3><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> Result</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> regasdgsdgister</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> account, </span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> password) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        final</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> account </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;-lock&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        final</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">nanoTime</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot; &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> UUID</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">randomUUID</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        ValueOperations</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> v </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> stringRedisTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">opsForValue</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        Boolean</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> res </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setIfAbsent</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(key,value);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(res){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            stringRedisTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">expire</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(key,</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">20L</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(account </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;用户名不能为空&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">password</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;密码不能为空&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            account </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> account</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">account</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;用户名不能为空&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">password</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;密码长度不能超过50&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            QueryWrapper</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">web</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&gt; queryWrapper </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> QueryWrapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">web</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            queryWrapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;account&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,account);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            List</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#F97583;">web</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">&gt; webs </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">  webMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">selectList</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">webs</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;用户名已存在&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> pass </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> passwordEncoder</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(password);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> jwt </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> JwtUtil</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">createJWT</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(account);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            web web1 </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> web</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            web1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setBackimg</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;5&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            web1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setList</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;[]&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            web1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setPassword</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(pass);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            web1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setAccount</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(account);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            web1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setDate</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            webMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">insert</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(web1);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> git  </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;[{</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">title</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">你好</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">name</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">:1,</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">content</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">## new content</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">show</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">:true}]</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">                    &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">            String</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> title </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;"> &quot;[</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">你好</span><span style="--shiki-light:#0184BC;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">]&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">publicMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">insert</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Public</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(account, title,git))</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">999999</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(key).</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">())){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">                stringRedisTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(key);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,jwt);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="redisson" tabindex="-1"><a class="header-anchor" href="#redisson"><span>Redisson</span></a></h3><p><a href="https://www.bilibili.com/video/BV1Yy4y1k79y/?p=5&amp;vd_source=f8821730ff8a13ec89104c8629e6d42b" target="_blank" rel="noopener noreferrer">Redisson学习地址</a></p><blockquote><p>引入</p></blockquote><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">&lt;!--    redisson--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;org.redisson&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;redisson&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;3.6.5&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>RedissonConfig</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> RedissonConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">    RedissonClient</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> redisson</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        Config</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> config </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Config</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        config</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">useSingleServer</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;redis://localhost:6379&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setDatabase</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> Redisson</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(config);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>使用</p></blockquote><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">    RedissonClient</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> redissonClient</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> Result</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> showbyid</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;">        RLock</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> lock </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> redissonClient</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getLock</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">valueOf</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(id));</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">        lock</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            article article </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> articleMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">selectById</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(id);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            article</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">setViews</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">article</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">getViews</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            int</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;"> articleMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">updateById</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(article);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Result</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#986801;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">,article);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">            lock</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="swagger" tabindex="-1"><a class="header-anchor" href="#swagger"><span>Swagger</span></a></h2><h3 id="搭建" tabindex="-1"><a class="header-anchor" href="#搭建"><span>搭建</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;io.springfox&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;springfox-swagger2&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;3.0.0&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes one-light github-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">EnableSwagger2</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#B392F0;"> SwaggerConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> Docket</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> productApi</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> Docket</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">DocumentationType</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">SWAGGER_2</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">apiInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">apiInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">apis</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">RequestHandlerSelectors</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">withMethodAnnotation</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">ApiOperation</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;">//添加ApiOperiation注解的被扫描</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">paths</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E1E4E8;">PathSelectors</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E1E4E8;"> ApiInfo</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> apiInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;"> ApiInfoBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;都是书本上的呀&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">description</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;根本不需要的描述&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div>`,58))])}const A=h(E,[["render",g]]),F=JSON.parse('{"path":"/blog/other/book.html","title":"书本","lang":"zh-CN","frontmatter":{"title":"书本","icon":"icon-park:book","order":2,"description":"简单配置即可上手的操作，例如邮件、定时任务、数据校验。","category":["常用操作"],"tag":["Markdown"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"书本\\",\\"image\\":[\\"https://github.com/user-attachments/assets/0907b832-fac1-4f55-871e-d8467e6c4d01\\",\\"https://cdn.beink.cn/study/UE1u8asx1_ccuu_NWZKiX.png\\"],\\"dateModified\\":\\"2024-10-17T06:19:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"mishu\\",\\"url\\":\\"https://github.com/ToTryEveryThing/my-docs\\"}]}"],["meta",{"property":"og:url","content":"https://docs.beink.cn/blog/other/book.html"}],["meta",{"property":"og:title","content":"书本"}],["meta",{"property":"og:description","content":"简单配置即可上手的操作，例如邮件、定时任务、数据校验。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://github.com/user-attachments/assets/0907b832-fac1-4f55-871e-d8467e6c4d01"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-17T06:19:04.000Z"}],["meta",{"property":"article:tag","content":"Markdown"}],["meta",{"property":"article:modified_time","content":"2024-10-17T06:19:04.000Z"}]]},"git":{"createdTime":1686126382000,"updatedTime":1729145944000,"contributors":[{"name":"514","username":"514","email":"849299509@qq.com","commits":1,"url":"https://github.com/514"},{"name":"mishu","username":"mishu","email":"riceuncle@outlook.com","commits":11,"url":"https://github.com/mishu"},{"name":"ToTryEveryThing","username":"ToTryEveryThing","email":"849299509@qq.com","commits":4,"url":"https://github.com/ToTryEveryThing"}],"changelog":[{"hash":"4eb6562273330e09a25940ba1ed41d62e4a5c302","time":1729145944000,"email":"riceuncle@outlook.com","author":"mishu","message":"Update <a href=\\"http://book.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">book.md</a>"},{"hash":"6f73239b58fca703dc113ad10ae79d7b8fb6fb92","time":1728439076000,"email":"riceuncle@outlook.com","author":"mishu","message":"icon"},{"hash":"ded7f6a012b43f5beb1156f25518fdfa5109bbbd","time":1723186347000,"email":"riceuncle@outlook.com","author":"mishu","message":"seo"},{"hash":"3a085f15eab56f0caebef229080dac502d1b4394","time":1723186347000,"email":"riceuncle@outlook.com","author":"mishu","message":"seo"},{"hash":"9fd8eec05b20e1f761b628c8b5b52fea7d230d3e","time":1720753466000,"email":"riceuncle@outlook.com","author":"mishu","message":"up"},{"hash":"1ea7d2f53eeabcfb54f5edaa612a2f7027d5824f","time":1720753466000,"email":"riceuncle@outlook.com","author":"mishu","message":"up"},{"hash":"295626e4ddbb8732e9dbec9bd4b33046e8510041","time":1691918745000,"email":"riceuncle@outlook.com","author":"mishu","message":"Update <a href=\\"http://book.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">book.md</a>"},{"hash":"257c1807536fe4b35f6541ade4b605b392263364","time":1691918745000,"email":"79239899+ToTryEveryThing@users.noreply.github.com","author":"mishu","message":"Update <a href=\\"http://book.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">book.md</a>"},{"hash":"743908293bdb2d231f9e897c19b98dc1544d8f8c","time":1691918745000,"email":"riceuncle@outlook.com","author":"mishu","message":"Update <a href=\\"http://book.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">book.md</a>"},{"hash":"0d62a07e98eeef315c4e2a9f082a34c257e57470","time":1691918745000,"email":"79239899+ToTryEveryThing@users.noreply.github.com","author":"mishu","message":"Update <a href=\\"http://book.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">book.md</a>"},{"hash":"5b843cd5546f80cd424fba4499d6e2f51d689fcf","time":1689490474000,"email":"riceuncle@outlook.com","author":"mishu","message":"hh"},{"hash":"d95f5b57df5d71d0288cbc8b324ff3c4fd006515","time":1689490474000,"email":"849299509@qq.com","author":"ToTryEveryThing","message":"hh"},{"hash":"ba3d713374b40e1264aa217433b8848b6f125d7b","time":1689490474000,"email":"riceuncle@outlook.com","author":"mishu","message":"hh"},{"hash":"c12a2f39915fe3da0b299b005c4d5e2e06967044","time":1689490474000,"email":"849299509@qq.com","author":"ToTryEveryThing","message":"hh"},{"hash":"0f5ff125a0071d72a3c78e8faefcfc84c0454910","time":1686126382000,"email":"riceuncle@outlook.com","author":"mishu","message":"66"},{"hash":"331b999719efaee6b63597e3d7c7d3e2ea090add","time":1686126382000,"email":"849299509@qq.com","author":"514","message":"66"}]},"readingTime":{"minutes":8.34,"words":2501},"filePathRelative":"blog/other/book.md","excerpt":"<h2>静态资源访问</h2>\\n<div class=\\"language-yml line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"yml\\" style=\\"--shiki-light:#383A42;--shiki-dark:#e1e4e8;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#24292e\\"><pre class=\\"shiki shiki-themes one-light github-dark vp-code\\"><code class=\\"language-yml\\"><span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#85E89D\\">spring</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#E1E4E8\\">:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#85E89D\\">  mvc</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#E1E4E8\\">:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#85E89D\\">    static-path-pattern</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#9ECBFF\\">/static/**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#85E89D\\">  web</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#E1E4E8\\">:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#85E89D\\">    resources</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#E1E4E8\\">:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#85E89D\\">      static-locations</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#9ECBFF\\">classpath:/static/</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{A as comp,F as data};
